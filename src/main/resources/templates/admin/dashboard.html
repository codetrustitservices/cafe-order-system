<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<div class="container mt-4">
    <h2>Admin Dashboard</h2>

    <!-- Stats Cards -->
    <div class="row">
        <div class="col-md-4">
            <div class="card text-white bg-primary">
                <div class="card-body">
                    <h5>Today's Orders</h5>
                    <h2 th:text="${todayOrders.size()}"></h2>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-warning">
                <div class="card-body">
                    <h5>Pending Orders</h5>
                    <h2 th:text="${pendingOrders.size()}"></h2>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Orders -->
    <div class="mt-4">
        <h4>Recent Orders</h4>
        <table class="table">
            <thead>
            <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Items</th>
                <th>Total</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="order : ${todayOrders}">
                <td th:text="${order.id}"></td>
                <td th:text="${order.customerName}"></td>
                <td th:text="${order.orderItems.size()}"></td>
                <td>â‚¹<span th:text="${order.totalAmount}"></span></td>
                <td>
                    <span class="badge bg-warning" th:text="${order.status}"></span>
                </td>
                <td>
                    <select onchange="updateStatus(this)" th:data-order-id="${order.id}">
                        <option value="PENDING">Pending</option>
                        <option value="PREPARING">Preparing</option>
                        <option value="READY">Ready</option>
                        <option value="COMPLETED">Completed</option>
                    </select>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<!-- CTA Section -->
<div class="cta-section">
    <div class="container">
        <div class="cta-content">
            <div class="cta-text">
                <h2 class="cta-title">Ready to Order?</h2>
                <p class="cta-subtitle">Browse our full menu and place your order via WhatsApp</p>
                <div class="cta-buttons">
                    <a href="/menu" class="cta-btn-primary">View Full Menu</a>
                    <a href="/menu" class="cta-btn-secondary">Order Now</a>
                </div>
            </div>
            <div class="cta-image">â˜•</div>
        </div>
        <br>
        <p>
            This is a demo website created by <strong>CodeTrust IT Services</strong>.
            You can contact us for a <strong>free demo</strong> and <strong>consultation support</strong>.
        </p>

        <p>
            ðŸ“§ Email:
            <a href="mailto:codetrust.help@gmail.com">codetrust.help@gmail.com</a>
        </p>

        <p>
            ðŸ”— Connect with us:
            <a href="https://www.linkedin.com/in/codetrust-it-services" target="_blank">LinkedIn</a> |
            <a href="https://www.instagram.com/codetrust_it_services/" target="_blank">Instagram</a> |
            <a href="https://github.com/codetrustitservices" target="_blank">GitHub</a>
        </p>

        <p>
            Â© 2026 CodeTrust IT Services
        </p>

    </div>

</div>

<script>
    function updateStatus(select) {
        let orderId = select.getAttribute('data-order-id');
        let status = select.value;
        fetch(`/admin/order/update-status/${orderId}?status=${status}`, {
            method: 'POST'
        }).then(() => location.reload());
    }
</script>
</body>
</html>